<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title></title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link href="css/index.css" rel="stylesheet" />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="#">Navbar</a>
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarNavAltMarkup"
        aria-controls="navbarNavAltMarkup"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav">
          <a id="uploadBtn" class="nav-item nav-link active" href="#"
            >Upload...</a
          >
        </div>
      </div>
    </nav>
    <div class="container"></div>

    <form class="d-none" action="http://localhost:3000/upload">
      <input type="file" name="sound" id="uploadInput" />
      <input type="submit" / id="uploadSend" />
    </form>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script src="https://unpkg.com/wavesurfer.js"></script>
    <script>
      $(() => {
        $("#uploadBtn").on("click", function () {
          console.log("CLIKC");
          setTimeout(() => $("#uploadInput").trigger("click"), 10);
        });
        $('#uploadInput').on('change',function(){
          $('#uploadSend').trigger('click');
          return;

          const file = this.files[0];
          const formData = new FormData();
          formData.append('files', {'sound': file});
          fetch("/upload", {
            method: "POST",
            headers: {'Content-Type': 'form-data'},
            body: formData
          }).then(res => console.log("File sent with response: ", res));
        })
      });
    </script>
  </body>
</html>
